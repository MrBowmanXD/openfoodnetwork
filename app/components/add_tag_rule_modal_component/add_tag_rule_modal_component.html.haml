-# as far as I can tell we can't pass content to the parent template while rendering ie: something like :
-# = render_parent do
-#   .something
-#     my content
-# Workarount is to copy the ModalComponent template
%div{ id: @id, "data-controller": @data_controller, "data-action": @data_action, "data-modal-instant-value": @instant, **@options }
  .reveal-modal-bg.fade{ "data-modal-target": "background", "data-action": "click->modal#close" }
  .reveal-modal.fade.modal-component{ "data-modal-target": "modal", class: @modal_class }
    #new-tag-rule-dialog{ "data-controller": "add-tag-rule-modal-component--add-tag-rule-modal",
      "data-add-tag-rule-modal-component--add-tag-rule-modal-index-value": current_index } 

      -# Ideally we would use event to communicate the update of customer tag, but we would need 
      -# the element with  "data-controller": "add-tag-rule-modal-component--add-tag-rule-modal" 
      -# to be parent of the element with "data-controller": "tag-rule-group-form-component--tag-rule-group-form" 
      -# so it could respond to event generated by  "tag-rule-group-form-component--tag-rule-group-form".
      -# Here we are in the opposite situation so we use a hidden field to store the value of 
      -# the customer tag, so it can be updated by "tag-rule-group-form-component--tag-rule-group-form"
      = hidden_field_tag "customer_tag", customer_tag, { "data-add-tag-rule-modal-component--add-tag-rule-modal-target": "ruleCustomerTag" }.merge(hidden_field_customer_tag_options)
      .text-normal.margin-bottom-30.text-center
        = t('components.add_tag_rule_modal.select_rule_type')
      .text-center.margin-bottom-30
        = select_tag :rule_type_selector, options_for_select(tag_rule_types), { "data-controller": "tom-select", "data-add-tag-rule-modal-component--add-tag-rule-modal-target": "rule", class: "primary no-search" }
      .text-center
        %input.button.red.icon-plus{ type: 'button',
          value: "#{t('components.add_tag_rule_modal.add_rule')}",
          "data-action": "click->add-tag-rule-modal-component--add-tag-rule-modal#add click->modal#close",
          "data-add-tag-rule-modal-component--add-tag-rule-modal-div-id-param": div_id,
          "data-add-tag-rule-modal-component--add-tag-rule-modal-is-default-param": "#{is_default}"}

    - if close_button?
      .text-center
        %input{ class: "button icon-plus #{close_button_class}", type: 'button', value: t('js.admin.modals.close'), "data-action": "click->modal#close" }
