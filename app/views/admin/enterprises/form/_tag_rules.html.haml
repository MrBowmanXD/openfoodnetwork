.row
  .eleven.columns.alpha.omega
    %div{ "data-turbo": true }
      - current_group_index = 0
      - current_rule_index = 0
      - rules = @enterprise.tag_rules.prioritised.reject(&:is_default)
      - if rules.empty?
        .no_tags
          = t('.no_tags_yet')

      = render 'admin/enterprises/form/tag_rules/default_rules', f: f, current_rule_index: current_rule_index

      #customer-tag-rule
        - tag_groups(rules).each_with_index do |group, group_index|
          - current_group_index = group_index + 1
          = render TagRuleGroupFormComponent.new(group:, index: group_index, customer_rule_index: current_rule_index, tag_rule_types: @tag_rule_types)
          - current_rule_index += group[:rules].length
          
      .add_tag{ "data-controller": "tag-rule-group" }
        = hidden_field_tag "group_index", current_group_index, { "data-tag-rule-group-target": "index" }
        = hidden_field_tag "customer_rule_index", current_rule_index, { "data-tag-rule-group-target": "customerRuleIndex" }
        %input.button{ type: 'button', value: t('.add_new_tag'), "data-action": "click->tag-rule-group#add" }
